<!DOCTYPE html>
<html>

<head>
  <script src="main.js"></script>
  <link rel="stylesheet" href="style.css">
</head>

<body id="root">
  <!-- 
  <sp-menu id="nav">
    <sp-menu-item data-page="main">Main</sp-menu-item>
    <sp-menu-item data-page="settings">Settings</sp-menu-item>
    <sp-menu-item data-page="about">About</sp-menu-item>
  </sp-menu> -->

  <sp-action-group id="nav" selects="single">
    <sp-action-button quiet data-page="main" style="text-decoration: underline;">Image</sp-action-button>
    <sp-action-button quiet data-page="chat">Chat</sp-action-button>
    <sp-action-button quiet data-page="settings">Preference</sp-action-button>
    <sp-action-button quiet data-page="about">About</sp-action-button>
  </sp-action-group>

  <sp-div id="pages">

    <!-- PAGE: MAIN -->
    <sp-div id="main" data-page>

      <!-- MODEL settings -->
      <sp-div>
        <sp-heading size="xs">Model Settings</sp-heading>
        <sp-divider size="small"></sp-divider>
        <!-- Select models -->
        <sp-picker placeholder="Choose a model..." , style="width: 220px">
            <sp-menu id="modelPicker" slot="options">
              <sp-menu-item value="doubao-seedream-4-5-251128">SeeDream 4.5</sp-menu-item>
              <sp-menu-item value="doubao-seedream-5-0-260128">SeeDream 5.0</sp-menu-item>
              <sp-menu-item value="gemini-3-pro-image-preview" selected>Nano Banana Pro üçå</sp-menu-item>
            <sp-menu-item value="grok-imagine-image">Grok Imagine</sp-menu-item>
            <!-- <sp-menu-item disabled value="flux2.max">FLUX.2[MAX]</sp-menu-item>
            <sp-menu-item disabled value="z-image">Z-Image</sp-menu-item> -->
          </sp-menu>
        </sp-picker>

        <!-- Resolution -->
        <sp-picker id="resolutionPickerArea" placeholder="Choose a resolution..." ,
          style="width: 108px; display: none;">
          <sp-menu id="resolutionPicker" slot="options">
            <sp-menu-item id="1K" value="1K">1K</sp-menu-item>
            <sp-menu-item id="2K" value="2K" selected>2K</sp-menu-item>
            <sp-menu-item id="4K" value="4K">4K</sp-menu-item>
          </sp-menu>
        </sp-picker>

        <!-- Aspect Ratio -->
        <sp-picker id="ratioPicker" placehodler="Choose a ratio" , style="width: 110px; display: none;">
          <sp-menu id="aspectRatioPicker" slot="options">
            <!-- As nano banana 3 pro and seedream 4.5/5.0 support arbitrary ratio input  -->
            <!-- it is unnecessary to add the ratio parameter to the http request body -->
            <sp-menu-item value="default" selected>Auto</sp-menu-item>
            <sp-menu-item value="1:1">1:1</sp-menu-item>
            <sp-menu-item value="3:4">3:4</sp-menu-item>
            <sp-menu-item value="4:3">4:3</sp-menu-item>
            <sp-menu-item value="2:3">2:3</sp-menu-item>
            <sp-menu-item value="3:2">3:2</sp-menu-item>
            <sp-menu-item value="16:9">16:9</sp-menu-item>
          </sp-menu>
        </sp-picker>

      </sp-div>

      <!-- Google Model Specific Settings -->
      <sp-div id="googleModel" width="220px">
        <!-- Temperature -->
        <sp-checkbox id="lockParam" checked>Lock Parameter</sp-checkbox>
        <sp-slider disabled id="temperature" variant="filled" min="0.3" max="1.00" value="1.0" step="0.01">
          <sp-label slot="label">Temperature</sp-label>
        </sp-slider>

        <sp-slider disabled id="top_p" variant="filled" min="0.8" max="0.95" value=".9" step="0.01">
          <sp-label slot="label">top_P</sp-label>
        </sp-slider>

      </sp-div>

      <!-- <sp-divider></sp-divider> -->
      <sp-heading size="xs">Generate Image</sp-heading>
      <sp-divider size="small"></sp-divider>
      <!-- input text which should be used as prompt later on -->

      <!-- image to be processed preview section -->
      <sp-div id="imagePreview" style="display: none;">
        <sp-label slot="label">Image Preview
          <sp-p id="imageToProcess" class="thumb"
            style="width: 220px; height: 220px; max-width: 300px; max-height: 300px; overflow: auto;"></sp-p>
          <sp-button id="clear" variant="secondary">Clear</sp-button>
          <sp-br></sp-br>
      </sp-div>

      <!-- prompt textarea -->
      <div class="main">

        <!-- SUB-PAGE: PROMPTS MANAGEMENT -->
        <sp-div id="promptManage">
          <sp-label slot="label">Prompt Preset</sp-label><br>
          <sp-picker placeholder="Choose a preset..." , style="width: 175px">
            <sp-menu id="promptPicker" slot="options">
            </sp-menu>
          </sp-picker>

          <!-- <sp-button variant="warning" style="height: 5px;">delete</sp-button> -->

          <sp-action-button id="editPromptButton" title="Create a new preset">
            <svg viewBox="0 0 36 36" style="width: 18px; height: 18px;" fill="gray">
              <path
                d="M33.567 8.2L27.8 2.432a1.215 1.215 0 0 0-.866-.353H26.9a1.371 1.371 0 0 0-.927.406L5.084 23.372a.99.99 0 0 0-.251.422L2.055 33.1c-.114.377.459.851.783.851a.251.251 0 0 0 .062-.007c.276-.063 7.866-2.344 9.311-2.778a.972.972 0 0 0 .414-.249l20.888-20.889a1.372 1.372 0 0 0 .4-.883 1.221 1.221 0 0 0-.346-.945zM11.4 29.316c-2.161.649-4.862 1.465-6.729 2.022l2.009-6.73z" />
            </svg>
          </sp-action-button>

          <!-- <sp-action-button id="editPrompt">
      </sp-action-button>
 -->
          <div id="newPresetTextDiv" style="display: none;">

            <div id="promptPresetDiv" class="main">
              <sp-label slot="labels">Prompt Name</sp-label>
              <sp-textfield id="newPresetName" width="220px">
              </sp-textfield>

              <sp-label slot="labels">Prompt Content</sp-label>
              <sp-textarea id="promptPresetTextarea" style="width: 220px;"
                placeholder="Select a prompt preset..."></sp-textarea>
              <div class="right">
                <sp-button id="deletePromptButton" variant="warning">Delete</sp-button>
                <sp-button id="savePromptPreset">Save</sp-button>
              </div>
            </div>

          </div>

        </sp-div>


        <sp-textarea id="promptInput" placeholder="Enter your prompt here"
          style="resize: vertical; overflow: auto; width: 220px" height="220px">
          <sp-label slot="label">Prompt</sp-label>
        </sp-textarea>

        <!-- TODO: add color difference explanation -->
        <sp-body id="error" class="error-message" style="display: none"></sp-body>

        <sp-br></sp-br>

        <div id="generateBtnDiv">
          <!-- <sp-button class="shortBtn" variant="secondary" id="loadPrompt">Load</sp-button> -->
          <sp-button class="shortBtn" id="generate">Generate</sp-button>
        </div>
        <sp-label id="jobCount" style="display: none;"></sp-label>
      </div>

      <div width="220px">
        <sp-div id="referenceImage" style="display: none;">
          <sp-heading size="xs">Reference Image</sp-heading>
          <sp-div id="refImagePreviewDiv" style="display: none;">
            <sp-label id='refCount' slot="label">Reference Image Preview </sp-label>

            <sp-p id="refImagePreview" class="thumb" style="
      display: flex;
      flex-direction: row;
      gap: 8px;
      overflow-x: auto;
      overflow-y: hidden;
      white-space: nowrap;
      width: 100%;
      height: 60px;">
            </sp-p>
          </sp-div>

          <sp-button id="reference" class="longBtn" variant="secondary" id="reference">Set as Reference</sp-button><br>
          <sp-button id="clearReference" class="longBtn" variant="warning" id="reference">Clear Reference
            Images</sp-button><br>

        </sp-div>
      </div>


      <!-- LOG -->
      <sp-heading size="xs" class="logArea">LOG</sp-heading>
      <sp-divider size="small"></sp-divider>
      <sp-textarea class="log logArea" id="log" height="200px" placeholder="Logging information">
        <sp-label slot="label">Logging information</sp-label></sp-textarea>
      <sp-br></sp-br>
      <sp-button class="logArea" id="clearLog" variant="secondary">clear</sp-button>

    </sp-div>

    <!-- PAGE: CHAT -->
    <sp-div id="chat" data-page hidden>
      <sp-heading size="xs">Chat Critique</sp-heading>
      <sp-divider size="small"></sp-divider>

      <sp-div id="chatImagePreview" style="display: none;">
        <sp-label slot="label">Image Preview
          <sp-p id="chatImageToProcess" class="thumb"
            style="width: 220px; height: 220px; max-width: 300px; max-height: 300px; overflow: auto;"></sp-p>
        </sp-label>
      </sp-div>

      <sp-textarea id="chatPromptInput" placeholder="Enter your prompt here"
        style="resize: vertical; overflow: auto; width: 220px" height="220px">
        <sp-label slot="label">Prompt</sp-label>
      </sp-textarea>

      <sp-br></sp-br>
      <sp-button class="shortBtn" id="critique">Critique</sp-button>
      <sp-br></sp-br>

      <sp-textarea id="chatOutput" placeholder="Streaming critique output will appear here"
        style="resize: vertical; overflow: auto; width: 220px" height="220px">
        <sp-label slot="label">Critique Output</sp-label>
      </sp-textarea>
    </sp-div>

    <!-- PAGE: SETTINGS -->
    <sp-div id="settings" data-page hidden>
      <!-- <sp-heading size="S">Developer</sp-heading> -->
      <sp-field-group label="settings">

        <sp-checkbox id="allowNSFW" style="display: none;" checked>Allow NSFW</sp-checkbox>
        <br>

        <sp-checkbox id="enablePrompt" checked>Enable Customised Prompt</sp-checkbox>
        <br>

        <sp-checkbox id="hidePromptPreset">Hide Prompt Preset</sp-checkbox>
        <br>

        <sp-checkbox id="referenceImageSetting">Enable Reference Image</sp-checkbox>
        <br>

        <sp-checkbox id="enableTextToImage">Enable Text to Image Generation</sp-checkbox>
        <br>

        <sp-checkbox id="hideLog">Hide Log</sp-checkbox>
        <br>

        <sp-checkbox id="test">Test Mode</sp-checkbox>
        <br>

        <sp-checkbox id="skipMask">Skip Layer Mask</sp-checkbox>
        <br>

        <sp-checkbox id="showModelParameter">Show Model Parameter</sp-checkbox>
        <br>

        <sp-checkbox id="previewImage">Preview Image</sp-checkbox>
        <br>

        <sp-checkbox id="persistGeneratedImages">Save Generated Images Persistently</sp-checkbox>
        <br>

        <sp-checkbox id="enableCritiquePromptEdit">Enable Critique Prompt Edit</sp-checkbox>
        <br>

        <sp-checkbox disabled>Group Generated Images</sp-checkbox>
        <br>

        <sp-checkbox id="adaptiveRatioSetting">Disable Adaptive Ratio</sp-checkbox>
        <br>
        <sp-checkbox id="adaptiveResolutionSetting">Disable Adaptive Resolution</sp-checkbox>
        <sp-slider id="upgradeFactorSlider" variant="filled" min="1.0" max="2.0" value="1.5" step="0.1"
          style="width: 200px;">
          <sp-label slot="label">Upgrade Factor</sp-label>
        </sp-slider>
        <br>

      </sp-field-group>

      <sp-button class="shortBtn" id="openImageFolder">Open Image Folder</sp-button>
      <br>

      <!-- perhaps change to type="password" -->
      <sp-heading size="xxs">API Key</sp-heading>
      <sp-textfield id="api-key-google" placeholder="****************" style="width: 220px;">
        <sp-label slot="label">Google</sp-label>
      </sp-textfield>
      <br>
      <sp-textfield id="api-key-bytedance" placeholder="****************" style="width: 220px;">
        <sp-label slot="label">Bytedance</sp-label>
      </sp-textfield>
      <br>
      <sp-textfield id="api-key-xai" placeholder="****************" style="width: 220px;">
        <sp-label slot="label">xAI</sp-label>
      </sp-textfield>
      <br>
      <sp-checkbox id="showKey">Show API Key in Plaintext</sp-checkbox><br>

      <sp-button class="shortBtn" id="update-api-key">Update</sp-button>

    </sp-div>

    <!-- PAGE: ABOUT -->
    <sp-div id="about" data-page hidden>
      <sp-label>
        <sp-heading size="xs">Discuss</sp-heading>

        Report a bug or issue on <sp-link variant="secondary"
          href="https://github.com/deewong7/Ai-Assisted-Image-Editing-for-Photoshop">Github</sp-link>.

        <br>

        Discuss more in Douyin group chat <sp-link variant="secondary"
          href="https://v.douyin.com/tWFPY5X2i_o/">here</sp-link>.

      </sp-label>


      <sp-heading size="xs">Developer Reference</sp-heading>
      <sp-link variant="secondary" href="https://developer.adobe.com/photoshop/uxp/2022/ps_reference/">Photoshop
        API</sp-link><br>
      <sp-link variant="secondary" href="https://developer.adobe.com/photoshop/uxp/2022/ps_reference/">UXP
        API</sp-link><br>
      <sp-link variant="secondary" href="https://artificialanalysis.ai/image/leaderboard/editing">Model Editing
        Leaderboard</sp-link><br>

      <sp-heading size="xs">Copyright</sp-heading>
      <sp-label>
        AI-assisted image editing for Photoshop<br>
        Version 0.2.0-alpha<br>

        ¬© 2026 dw<br>
        License: GPL-3.0<br>
        <br>
        Developed by dw
        <br>
        <br>

        Free to use.

        If this plugin helps you,<br>
        consider supporting its development.<br>
        It would feed a cat who supervises <br> most of the coding.<br>

        <br>
        This plugin is not affiliated with or endorsed <br>by Adobe Inc.<br>
        Adobe and Photoshop are trademarks of<br>Adobe Inc.
      </sp-label>

    </sp-div>
  </sp-div>

  <!-- <sp-menu label="Selection type"> -->
  <!-- <sp-menu-item id="menu"> Menu </sp-menu-item> -->
  <!-- <sp-menu-divider></sp-menu-divider> -->
  <!-- <sp-menu-item id="mainMenu" style="display: none;"> Main </sp-menu-item> -->
  <!-- <sp-menu-item id="settingMenu" style="display: none;"> Settings </sp-menu-item> -->
  <!-- <sp-menu-item disabled> Other </sp-menu-item> -->
  <!-- </sp-menu> -->

</body>

</html>
